<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>$$헌팅나라$$</title>

    <!-- bootstrap including jquery -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {
        $('#outer_portfolio').click(function() {
            window.open('/download/outer_portfolio/freelancer');
        });
        $.ajax({
            type: 'post',
            url: '/user/inner_portfolio',
            data: {},
            success: function(data, status) {
                $('#inner_portfolio').find('tr:gt(0)').remove();
                const cols = ['TITLE', 'S_DATE', 'E_DATE', 'R_NUM', 'RATE'];
                for (let i=0; i<data.length; i++) {
                    data[i]['S_DATE'] = new Date(data[i]['S_DATE']).toLocaleDateString('ko-KR');
                    data[i]['E_DATE'] = new Date(data[i]['E_DATE']).toLocaleDateString('ko-KR');
                    data[i]['R_NUM'] = '<button type="button" onclick="window.open(\'/download/report?rNum=' + data[i]['R_NUM'] + '\')">다운로드</button>'
                    let newTr = '<tr>';
                    for (const col of cols) {
                        newTr += '<td>' + data[i][col] + '</td>';
                    }
                    $('#inner_portfolio tr:last').after(newTr);
                }
            },
            error: function(err) {
                console.log(err);
            }
        });
    });
    </script>
</head>
<body>
    <h1>포트폴리오</h1>
    <div class="inner_portfolio">
        내부 포트폴리오:
        <table id="inner_portfolio" style="width: 50%;">
            <tr>
                <th>제목</th>
                <th>시작날짜</th>
                <th>종료날짜</th>
                <th>보고서</th>
                <th>평점</th>
            </tr>
        </table><br>
    </div>
    <div class="outer_portfolio">
        외부 포트폴리오:
        <button type="button" id="outer_portfolio">다운로드</button>
    </div>

</body>
</html>