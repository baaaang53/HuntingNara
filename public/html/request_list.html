<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>$$헌팅나라$$</title>

    <!-- bootstrap including jquery -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        function showAll() {
            $.ajax({
                type: 'post',
                url: '/request/list',
                data: {},
                success: function(data) {
                    const cols = ['TITLE', 'S_DATE', 'E_DATE', 'COST', 'CAREER'];
                    for (const row of data) {
                        let newTr = '<tr>';
                        for (const col of cols) {
                            newTr += '<td>' + row[col] + '</td>';
                        }
                        newTr += '</tr>';
                        $('#request_table tr:last').after(newTr);
                    }
                },
                error: function(err) {
                    console.log(err);
                    alert('오류가 발생하였습니다');
                }
            });
        }
        function show_client() {
            $.ajax({
                type: 'post',
                url: '/request/client/list',
                data: {},
                success: function(data) {
                    const cols = ['TITLE', 'S_DATE', 'E_DATE', 'COST', 'CAREER'];
                    for (const row of data) {
                        let newTr = '<tr>';
                        for (const col of cols) {
                            newTr += '<td>' + row[col] + '</td>';
                        }
                        newTr += '</tr>';
                        $('#request_table tr:last').after(newTr);
                    }
                },
                error: function(err) {
                    console.log(err);
                    alert('오류가 발생하였습니다');
                }
            });
        }
        function show_freelancer() {
            $.ajax({
                type: 'post',
                url: '/request/freelancer/list',
                data: {},
                success: function(data) {
                    const cols = ['TITLE', 'S_DATE', 'E_DATE', 'COST', 'CAREER'];
                    for (const row of data) {
                        let newTr = '<tr>';
                        for (const col of cols) {
                            newTr += '<td>' + row[col] + '</td>';
                        }
                        newTr += '</tr>';
                        $('#request_table tr:last').after(newTr);
                    }
                },
                error: function(err) {
                    console.log(err);
                    alert('오류가 발생하였습니다');
                }
            });
        }
    </script>
</head>
<body>
    <h1>의뢰 목록 보기</h1>
    <div>
        <!-- 여기에 if문으로 현재 로그인중인 계정 따라 구분, showAll/show_freelancer/show_client -->
        <button type="button" onclick="show_freelancer();">의뢰조회</button>
    </div>
    <div>
        <table id="request_table" style="width: 100%;">
            <tr>
                <th>제목</th>
                <th>시작</th>
                <th>종료</th>
                <th>비용</th>
                <th>요구경력</th>
            </tr>
        </table>
    </div>
</body>
</html>